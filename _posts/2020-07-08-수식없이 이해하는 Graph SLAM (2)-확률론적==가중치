---
layout: post
title: 수식없이 이해하는 Graph SLAM (2)-확률론적==가중치
subtitle: Introduction
tags: [graph slam]
comments: true
---

# 입문의 바이블, 하지만 개발과의 괴리

SLAM이나 로보틱스 분야에 관심이 있으신 분이라면, 다들 한번쯤 Probabilistic Robotics를 정독해라고 추천받으셨을 것이고, Probabilistic Robotics를 구매하신 분들도 꽤나 많으실 겁니다. 그런데 읽기에 앞서 왜 *Probabilistic*인지에 대한 고민을 해보셨나요? 왜 확률이 쓰인다는 게 뭘까? 이 chapter에서는 확률론적으로 값을 기술한다는 게 무엇인지, 그리고 그것을 어떻게 활용할 수 있는지에 대해서 알아보겠습니다.

# m:n로 내분하는 점에서 가져오는 insight

고등학교 정규과정을 배우신 분이라면, m:n으로 내분하는 점에 대해서 계산을 하실 수 있을 것이라 생각합니다. 이 개념을 이제 Probabilistic Robotics까지 이어보기 위해 예시를 들어보겠습니다.

**Q.** 최신 휴대폰 갤럭시 S90을 구매하려고 두 매장에 방문하였습니다. 하지만 실제 휴대폰의 원가 N원이라 하고, 정확한 값은 모르는 상황이라고 가정을 합니다. A 매장의 주인인 김씨는 동네에서 물건을 굉장히 정직하게 판매하기로 소문난 분입니다. 마진도 얼마 남기지 않고 물품을 유통만 하여 거저 준다고 동네 사람들이 말할 정도니까요. 하지만 B 매장의 주인인 이씨는 다릅니다. 동네에 휴대폰의 시세를 잘 모르는 사람들에게 바가지를 씌워 비싸게 팔기로 유명하기 때문입니다. 이러한 가정 속에서 A 매장에 갔더니 김씨가 휴대폰을 50만원에 팔겠다고 하고, B 매장에 갔더니 이씨가 물건 구하기가 너무 힘들었다고, 70만원을 줘도 남는 게 투정을 부립니다. 그러면 이 때 실제 갤럭시 S90의 값을 얼마 정도에 사면 잘 샀다고 말할 수 있을까요?

**A.** 이런 상황에서는 당연히 *갤럭시 S90의 가격의 원가가 한 50만원 언저리겠구나*라고 생각하실 겁니다. 왜일까요? 당연히 김씨가 훨씬 신뢰도가 높기 때문입니다. 그렇다면 반대로 생각해서, 이씨의 말은 휴대폰의 값을 추정하는데 전혀 도움이 되지 않을까요? 그 것도 아닙니다. 적어도 S90의 원가 N원이 70만원보다는 이하라는 정보를 제공해주기 때문입니다.

SLAM을 공부하려고 읽고 있었는데, 갑자기 휴대폰을 구매하는 얘기를 해서 당황하셨을 겁니다. 하지만 위의 예시는 사실 비유일 뿐이고, 로봇의 세계-*혹은 센서의 세계*-에서는 여러 센서를 활용해서 어떤 값을 추정하기 때문에, 위의 예시처럼 각 센서마다 주는 값을 믿을 수 있는 정도를 잘 활용하는 것이 관건입니다. 위의 예시에서 좀 더 수치적으로 나아가서, 김씨가 거짓말할 확률이 0.1%라고 가정을 하고, 이씨가 거짓말 할 확률을 90%라고 합시다. 여기에 처음 언급했던 내분점을 활용하면 아래와 같이 표현할 수 있습니다.

즉, 거짓말할 확률을 고려하면 실제 다른 매장에 가서 폰을 살때도 *이 정도면 싸게 샀다*라고 말할 수 있을 것입니다. 위의 예시처럼 우리가 실제로 정확한 값을 모르는 상황에서는 어떤 정보를 더 신뢰할지에 대해서 판단을 해야합니다. 이 과정을 이제 센서에 적용시켜서 로봇의 현재 state를 추정하는 것이 Probabilistic Robotics에서 전달하고자 하는 바입니다.  

# 센서의 값도 거짓말을 한다고요?

그럼 실제 센서의 세계로 넘어가서 이해를 해봅시다. 키가 실제로는 180.45cm인 사람이 있습니다. 그런데 이 사람이 줄 2cm 간격인 줄자로 재었을 때는 180cm으로 측정되고, 보건실에 있는, 자동으로 키를 측정하는 디지털 신장계에서 키를 재었더니 180.4cm가 나왔습니다. 일반적인 상황이라면 자신의 키가 180.4cm라고 생각을 하고 말 것입니다. 하지만 이러한 값들을 무조건 신뢰할 수 있을까요? 답은 그렇지 않습니다. 키를 재는데 몸이 앞이나 옆으로 약간 기울어져있어서 신장계가 정확히 머리 중간에 맞지 않았을 수도 있고, calibration을 다 되어 있겠지만 신장계의 내부 센서의 노이즈로 인한 오차가 있을 수도 있기 때문입니다. 그래서 이러한 오차를 줄이고자 우리는 정말 정확한 값을 측정하고 싶으면 키를 여러 번을 측정해서 그 값의 평균이 자신의 키라고 여겼을 것입니다. 

# 거짓말을 할 확률 == 1/센서의 정확도 == 분산


# Sigma 값


# 다변수로 가면

키, 몸무게, 허벅지 두께, 발 크기



## Reference
[1] Probabilistic Analysis와 Stochastic Analysis의 차이, https://snoopy0505.tistory.com/87  <br/>
[2] Filtering a PointCloud using a PassThrough filter, http://pointclouds.org/documentation/tutorials/passthrough.php <br/>
[3] Downsampling a PointCloud using a VoxelGrid filter, http://pointclouds.org/documentation/tutorials/voxel_grid.php <br/>
[4] Removing outliers using a StatisticalOutlierRemoval filter, http://pointclouds.org/documentation/tutorials/statistical_outlier.php <br/>

